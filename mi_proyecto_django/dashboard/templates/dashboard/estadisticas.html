{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard de Humedad</title>
    <link rel="stylesheet" href="{% static 'dashboard/css/dashboard.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="dashboard-container">

        <div class="stat-card">
            <h2>Máxima del Día</h2>
            <div class="value" id="max-humedad">--</div>
            <div class="label">%</div>
        </div>

        <div class="stat-card">
            <h2>Mínima del Día</h2>
            <div class="value" id="min-humedad">--</div>
            <div class="label">%</div>
        </div>

        <div class="stat-card">
            <h2>Promedio del Día</h2>
            <div class="value" id="avg-humedad">--</div>
            <div class="label">%</div>
        </div>

        <div class="stat-card">
            <h2>Valor Actual</h2>
            <div class="value" id="valor-actual">--</div>
            <div class="label">%</div>
        </div>

        <!-- Aquí agregaremos más tarjetas luego -->

    </div>

    <script>
        function cargarEstadisticas() {
            axios.get("{% url 'api_estadisticas_humedad' %}")
                .then(response => {
                    const { maximo, minimo, promedio, actual } = response.data;
                    document.getElementById('max-humedad').textContent = maximo?.toFixed(1) ?? '--';
                    document.getElementById('min-humedad').textContent = minimo?.toFixed(1) ?? '--';
                    document.getElementById('avg-humedad').textContent = promedio?.toFixed(1) ?? '--';
                    document.getElementById('valor-actual').textContent = actual?.toFixed(1) ?? '--';
                })
                .catch(error => {
                    console.error("Error al cargar estadísticas:", error);
                });
        }

        cargarEstadisticas();
        setInterval(cargarEstadisticas, 5000);
    </script>
</body>
</html>
